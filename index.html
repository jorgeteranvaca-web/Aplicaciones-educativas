<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Saga de los N칰meros Eternos</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Spectral:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- DISE칌O (CSS) --- */
        :root {
            --color-fondo: #0e1117;
            --color-fondo-gradiente: linear-gradient(to bottom, #141e30, #243b55);
            --color-dorado: #FFD700;
            --color-texto: #e0e0e0;
            --color-input-bg: #2b303b;
        }

        body {
            margin: 0;
            padding: 20px;
            background-image: var(--color-fondo-gradiente);
            background-attachment: fixed; /* El fondo se queda quieto al hacer scroll */
            color: var(--color-texto);
            font-family: 'Spectral', serif;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 800px;
            background-color: rgba(14, 17, 23, 0.8); /* Fondo semi-transparente */
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        h1.titulo-principal {
            font-family: 'Cinzel', serif;
            color: var(--color-dorado);
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px #000;
        }

        .banner-img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--color-dorado);
            /* Usamos una imagen de ejemplo, 춰c치mbiala si tienes la URL de la tuya! */
            content: url('https://img.freepik.com/free-photo/fantasy-landscape-with-mystical-light_23-2150985153.jpg?w=1380');
        }

        .intro-text {
            font-size: 1.1rem;
            margin-bottom: 30px;
            text-align: justify;
        }

        .chat-section {
            border-top: 2px solid rgba(255, 215, 0, 0.3);
            padding-top: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        input[type="text"] {
            flex-grow: 1;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #4a4a4a;
            background-color: var(--color-input-bg);
            color: white;
            font-family: inherit;
            font-size: 1rem;
        }

        button#btn-invocar {
            padding: 15px 30px;
            background-color: var(--color-dorado);
            color: #0e1117;
            border: none;
            border-radius: 10px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button#btn-invocar:hover {
            background-color: #cda700;
        }

        #respuesta-oraculo {
            margin-top: 20px;
            padding: 20px;
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 4px solid var(--color-dorado);
            border-radius: 5px;
            display: none; /* Oculto al principio */
        }
        
        .cargando {
            text-align: center;
            color: var(--color-dorado);
            font-style: italic;
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 class="titulo-principal">El Amanecer de los N칰meros</h1>
        <img class="banner-img" alt="Paisaje m칤stico">
        
        <div class="intro-text">
            <p>Antes del tiempo, el universo era un lienzo en blanco. Tres guardianes surgieron: <strong>Pit치goras, Euclides e Hipatia</strong>. Juntos, usando n칰meros y palabras, dieron orden al caos.</p>
            <p>Ahora, deben cruzar mundos olvidados donde la matem치tica es magia y la palabra es poder.</p>
        </div>

        <div class="chat-section">
            <h3>游댩 Consulta a los Guardianes</h3>
            <div class="input-group">
                <input type="text" id="user-input" placeholder="Escribe tu pregunta o acertijo aqu칤...">
                <button id="btn-invocar">Invocar Visi칩n</button>
            </div>
            
            <p class="cargando" id="loading-msg">Los astros se alinean...</p>
            
            <div id="respuesta-oraculo">
                </div>
        </div>
    </div>

    <script type="module">
        // 1. Importamos la librer칤a de Google directamente de internet
        import { GoogleGenerativeAI } from "https://esm.run/@google/genai";

        // 游댮游댮游댮 춰IMPORTANTE! PEGA TU API KEY AQU칈 ABAJO ENTRE LAS COMILLAS 游댮游댮游댮
        const API_KEY = "AIzaSyDTaOIxQTFl1odaZGH_kCRgLB2d2SQol1c"; 
        // 游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮游댮

        // 2. Configuraci칩n de la IA
        const genAI = new GoogleGenerativeAI(API_KEY);
        const model = genAI.getGenerativeModel({ 
            model: "gemini-1.5-flash",
            // Le damos la personalidad del narrador
            systemInstruction: "Eres el narrador de un juego de fantas칤a matem치tica llamado 'La Saga de los N칰meros Eternos'. Tu tono es 칠pico, m칤stico y antiguo. Responde a las preguntas matem치ticas como si fueran magia."
        });

        // 3. Conexi칩n con los elementos de la p치gina
        const inputField = document.getElementById('user-input');
        const button = document.getElementById('btn-invocar');
        const respuestaBox = document.getElementById('respuesta-oraculo');
        const loadingMsg = document.getElementById('loading-msg');

        // 4. Funci칩n que se ejecuta al hacer clic en el bot칩n
        button.addEventListener('click', async () => {
            const pregunta = inputField.value;
            if (!pregunta) return; // Si est치 vac칤o, no hacemos nada

            // Mostrar estado de carga
            loadingMsg.style.display = 'block';
            respuestaBox.style.display = 'none';
            button.disabled = true; // Desactivar bot칩n para que no den doble clic

            try {
                // Llamamos a la IA
                const result = await model.generateContent(pregunta);
                const response = await result.response;
                const text = response.text();

                // Mostrar respuesta
                respuestaBox.innerHTML = `<p>${text}</p>`; // Usamos innerHTML para que respete p치rrafos
                respuestaBox.style.display = 'block';
            } catch (error) {
                respuestaBox.innerHTML = `<p style="color: red;">丘멆잺 Las fuerzas del caos interfieren: ${error.message}</p>`;
                respuestaBox.style.display = 'block';
            } finally {
                // Ocultar carga y reactivar bot칩n
                loadingMsg.style.display = 'none';
                button.disabled = false;
            }
        });

        // Permitir enviar con la tecla Enter
        inputField.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') button.click();
        });

    </script>
</body>
</html>
